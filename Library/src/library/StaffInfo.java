/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package library;

import DAO.StaffDAO;
import DAO.StaffInfoDAO;


import DataHelper.Notify;
import DataHelper.Validator;
import com.microsoft.sqlserver.jdbc.StringUtils;
import java.util.List;
import java.util.stream.Stream;

import javax.swing.JOptionPane;

import javax.swing.table.DefaultTableModel;

/**
 *
 * @author Acer
 */
public class StaffInfo extends javax.swing.JPanel {
    private DefaultTableModel table;
    
    /**
     * Creates new form StaffInfo
     */
    public StaffInfo() {
        initComponents();
        initTable();
        loadData();
        loadID();

       
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        buttonGroup1 = new javax.swing.ButtonGroup();
        jPanel1 = new javax.swing.JPanel();
        btnxoa = new javax.swing.JButton();
        btnupdate = new javax.swing.JButton();
        btnadd = new javax.swing.JButton();
        txtaddress = new javax.swing.JTextField();
        jLabel10 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        jLabel1 = new javax.swing.JLabel();
        cbid = new javax.swing.JComboBox<>();
        txtname = new javax.swing.JTextField();
        txtphone = new javax.swing.JTextField();
        jLabel11 = new javax.swing.JLabel();
        rdnam = new javax.swing.JRadioButton();
        rdnu = new javax.swing.JRadioButton();
        txtngayvao = new javax.swing.JFormattedTextField();
        txtngaysinh = new javax.swing.JFormattedTextField();
        txtngayra = new javax.swing.JFormattedTextField();
        jLabel14 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        jLabel13 = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        tablestaff = new javax.swing.JTable();
        jLabel2 = new javax.swing.JLabel();
        txtemail = new javax.swing.JTextField();
        btnreset = new javax.swing.JButton();

        jPanel1.setBackground(new java.awt.Color(204, 204, 255));

        btnxoa.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        btnxoa.setForeground(new java.awt.Color(255, 0, 0));
        btnxoa.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Image/delete.png"))); // NOI18N
        btnxoa.setText("Xóa");
        btnxoa.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        btnxoa.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnxoaActionPerformed(evt);
            }
        });

        btnupdate.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        btnupdate.setForeground(new java.awt.Color(255, 153, 0));
        btnupdate.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Image/update.png"))); // NOI18N
        btnupdate.setText("Sửa");
        btnupdate.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        btnupdate.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnupdateActionPerformed(evt);
            }
        });

        btnadd.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        btnadd.setForeground(new java.awt.Color(255, 0, 153));
        btnadd.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Image/them.png"))); // NOI18N
        btnadd.setText("Thêm");
        btnadd.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        btnadd.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnaddActionPerformed(evt);
            }
        });

        txtaddress.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));

        jLabel10.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        jLabel10.setForeground(new java.awt.Color(0, 51, 204));
        jLabel10.setText("Địa Chỉ");

        jLabel9.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        jLabel9.setForeground(new java.awt.Color(0, 51, 204));
        jLabel9.setText("Số Điện Thoại");

        jLabel8.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        jLabel8.setForeground(new java.awt.Color(0, 51, 204));
        jLabel8.setText("Họ Tên");

        jLabel1.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        jLabel1.setForeground(new java.awt.Color(0, 51, 204));
        jLabel1.setText("Mã nhân viên");

        txtname.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));

        txtphone.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));

        jLabel11.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        jLabel11.setForeground(new java.awt.Color(0, 51, 204));
        jLabel11.setText("Giới Tính");

        buttonGroup1.add(rdnam);
        rdnam.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        rdnam.setSelected(true);
        rdnam.setText("Nam");

        buttonGroup1.add(rdnu);
        rdnu.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        rdnu.setText("Nữ");

        txtngayvao.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));

        txtngaysinh.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));

        txtngayra.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));

        jLabel14.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        jLabel14.setForeground(new java.awt.Color(0, 51, 204));
        jLabel14.setText("Ngày nghỉ");

        jLabel12.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        jLabel12.setForeground(new java.awt.Color(0, 51, 204));
        jLabel12.setText("Ngày Sinh");

        jLabel13.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        jLabel13.setForeground(new java.awt.Color(0, 51, 204));
        jLabel13.setText("Ngày Vào");

        tablestaff.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        tablestaff.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tablestaffMouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(tablestaff);

        jLabel2.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        jLabel2.setForeground(new java.awt.Color(0, 51, 204));
        jLabel2.setText("Email");

        txtemail.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));

        btnreset.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        btnreset.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Image/reset.png"))); // NOI18N
        btnreset.setText("Reset");
        btnreset.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        btnreset.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnresetActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel10)
                                    .addComponent(jLabel9)
                                    .addComponent(jLabel8))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(txtname, javax.swing.GroupLayout.PREFERRED_SIZE, 145, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(txtphone, javax.swing.GroupLayout.PREFERRED_SIZE, 145, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(txtaddress, javax.swing.GroupLayout.PREFERRED_SIZE, 145, javax.swing.GroupLayout.PREFERRED_SIZE)))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addComponent(jLabel1)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(cbid, javax.swing.GroupLayout.PREFERRED_SIZE, 146, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addGap(103, 103, 103)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel1Layout.createSequentialGroup()
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel13)
                                    .addComponent(jLabel14)
                                    .addComponent(jLabel2))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                        .addComponent(txtemail, javax.swing.GroupLayout.Alignment.LEADING)
                                        .addComponent(txtngayvao, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 117, Short.MAX_VALUE))
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addComponent(txtngayra, javax.swing.GroupLayout.PREFERRED_SIZE, 117, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addComponent(jLabel11, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addComponent(rdnam)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addComponent(rdnu))))
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel1Layout.createSequentialGroup()
                                .addComponent(jLabel12)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(txtngaysinh, javax.swing.GroupLayout.PREFERRED_SIZE, 117, javax.swing.GroupLayout.PREFERRED_SIZE))))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(btnadd, javax.swing.GroupLayout.PREFERRED_SIZE, 88, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(btnupdate)
                        .addGap(18, 18, 18)
                        .addComponent(btnxoa)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(btnreset)))
                .addContainerGap(10, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addGap(7, 7, 7)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(2, 2, 2)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(jLabel11)
                                    .addComponent(rdnam)
                                    .addComponent(rdnu)))
                            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(txtngayra, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(jLabel14)))
                        .addGap(7, 7, 7)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(txtngaysinh, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel12))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel13)
                            .addComponent(txtngayvao, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel2)
                            .addComponent(txtemail, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel1)
                            .addComponent(cbid, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel8)
                            .addComponent(txtname, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel9)
                            .addComponent(txtphone, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel10)
                            .addComponent(txtaddress, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addGap(21, 21, 21)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnadd)
                    .addComponent(btnupdate)
                    .addComponent(btnxoa)
                    .addComponent(btnreset))
                .addGap(16, 16, 16)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 356, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
    }// </editor-fold>//GEN-END:initComponents
    private static String id;
    private void tablestaffMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tablestaffMouseClicked
        // TODO add your handling code here:
        int select=tablestaff.getSelectedRow();
        id=tablestaff.getValueAt(select, 0).toString();
        try {
            StaffInfoDAO d=new StaffInfoDAO();
        Model.StaffInfo s=d.FinById(id);
        txtemail.setText(s.getEmail()); 
        txtname.setText(s.getName());
        txtphone.setText(s.getSdt());
        txtaddress.setText(s.getDiachi());
        txtngayvao.setText(s.getNgaylam());
        txtngaysinh.setText(s.getNgaysinh());
        if(s.getSex().equalsIgnoreCase("Nam"))
        {
            rdnam.setSelected(true);
            rdnu.setSelected(false);
        }
        else
        {
            rdnu.setSelected(true);
            rdnam.setSelected(false);
        }
        } catch (Exception e) {
        }
        
    }//GEN-LAST:event_tablestaffMouseClicked

    private void btnaddActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnaddActionPerformed
        // TODO add your handling code here:
        StringBuilder sb=new StringBuilder();
        Validator.CheckText(txtname, sb, "Tên nhân viên trống");
        Validator.CheckText(txtaddress, sb, "Địa chỉ trống");
        Validator.CheckText(txtemail, sb, "Email trống");
        Validator.CheckText(txtngayvao, sb, "Ngày vào trống");
        Validator.CheckText(txtphone, sb, "Số điện thoại trống");
        Validator.CheckText(txtngaysinh, sb, "Ngày sinh trống");
        if(sb.length()>0)
        {
            Notify.ChickenMessageDialog(this, sb.toString(), "Lỗi");
            return;
        }
        try {
            Model.StaffInfo s=new Model.StaffInfo();
            StaffDAO data=new StaffDAO();
            Model.Staff sa=data.FindId(cbid.getSelectedItem().toString());
            s.setId(sa.getId());
            s.setName(txtname.getText());
            s.setDiachi(txtaddress.getText());
            s.setNgaynghi(txtngayra.getText());
            s.setNgaysinh(txtngaysinh.getText());
            s.setSdt(txtphone.getText());
            s.setNgaylam(txtngayvao.getText());
            s.setSex(rdnam.isSelected()?"Nam":"Nữ");
            s.setEmail(txtemail.getText());
            StaffInfoDAO st=new StaffInfoDAO();
            if(st.insertStaffInfo(s))
            {
                Notify.ChickenMessageDialog(this, "Thêm thông tin nhân viên thành công", "Thông báo");
                loadData();
            }
            else{
                Notify.ChickenErrorMessageDialog(this, "Đã xảy ra lỗi vui lòng xem lại", "Cảnh báo");
            }
        } catch (Exception e) {
            e.printStackTrace();//in ra chi tiết lỗi
            Notify.ChickenErrorMessageDialog(this, e.getMessage(), "Lỗi");
        }
    }//GEN-LAST:event_btnaddActionPerformed

    private void btnupdateActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnupdateActionPerformed
        // TODO add your handling code here:
        StringBuilder sb=new StringBuilder();
        Validator.CheckText(txtname, sb, "Tên nhân viên null");
        Validator.CheckText(txtemail, sb, "Email trống");
        Validator.CheckText(txtngayvao, sb, "ngày rvào null");
        Validator.CheckText(txtngaysinh, sb, "Ngày sinh null");
        Validator.CheckText(txtphone, sb, "Số điện thoại null");
        Validator.CheckText(txtaddress, sb, "Địa chỉ null");
        if(sb.length()>0)
        {
            Notify.ChickenMessageDialog(this, sb.toString(), "Lỗi");
            return;
        }
        if(Notify.ChickenConfirmDialog(this, "Bạn có muốn cập nhập không?", "Thông báo")==JOptionPane.NO_OPTION)
        {
            return;
        }
        try {

            Model.StaffInfo up=new Model.StaffInfo();
            up.setId(id);
            up.setName(txtname.getText());
            up.setSex(rdnam.isSelected()?"Nam":"Nữ");
            up.setNgaysinh(txtngaysinh.getText());
            up.setSdt(txtphone.getText());
            up.setDiachi(txtaddress.getText());
            up.setNgaylam(txtngayvao.getText());
            if(txtngayra.getText().equals(""))
            {
            
            }else{
                up.setNgaynghi(txtngayra.getText());
            }
            up.setEmail(txtemail.getText());
            StaffInfoDAO st=new StaffInfoDAO();
            if(st.updateStaffInfo(up))
            {
                Notify.ChickenMessageDialog(this, "Cập nhập dữ liệu thành công", "Thông báo");
                loadData();
            }
            else{
                Notify.ChickenErrorMessageDialog(this, "Đã xảy ra lỗi vui lòng xem lại", "Cảnh báo");
            }
        } catch (Exception e) {
            e.printStackTrace();//in ra chi tiết lỗi
            Notify.ChickenErrorMessageDialog(this, e.getMessage(), "Lỗi");
        }
    }//GEN-LAST:event_btnupdateActionPerformed

    private void btnxoaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnxoaActionPerformed
        // TODO add your handling code here:
        StringBuilder sb=new StringBuilder();
        if(id==null)
        {
            sb.append("Chưa nhân viên để xóa");

        }
        if(sb.length()>0)
        {
            Notify.ChickenMessageDialog(this, sb.toString(), "Báo lỗi");
            return;
        }
        if(Notify.ChickenConfirmDialog(this, "Bạn có muốn xóa thông tin nhân viên không?", "Thông báo")==JOptionPane.NO_OPTION)
        {
            return;
        }
        try {
            StaffInfoDAO sf=new StaffInfoDAO();
            Model.StaffInfo s=new Model.StaffInfo();
            s.setId(id);
            if(sf.deleteStaffInfo(s))
            {
                Notify.ChickenMessageDialog(this, "Xóa dữ liệu có mã "+id+" thành công", "Thông báo");
                loadData();
            }
            else{
                Notify.ChickenMessageDialog(this, "Không có mã "+id+" trong CSDL", "Báo lỗi");
            }
        } catch (Exception e) {
            Notify.ChickenErrorMessageDialog(this, e.getMessage(), "Lỗi");
        }
    }//GEN-LAST:event_btnxoaActionPerformed

    private void btnresetActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnresetActionPerformed
        // TODO add your handling code here:
        loadData();
        cbid.removeAllItems();
        loadID();
    }//GEN-LAST:event_btnresetActionPerformed
private void initTable()
    {
        table=new DefaultTableModel();
        table.setColumnIdentifiers(new String[]{"Mã nhân viên","Tên","Giới tính","Ngày sinh","Phone","Địa chỉ","Email","Ngày vào","Ngày ra"});//set danh sách cột trong table
        tablestaff.setModel(table);
    }
 public void loadData()
    {
        try {
            StaffInfoDAO sf=new  StaffInfoDAO();
            List<Model.StaffInfo> list=sf.FindStaffInfo();
            table.setRowCount(0);//trc khi cap nhâp xoa hết data r update lại
            for(Model.StaffInfo s:list)
            {
                table.addRow(new Object[]{
                    s.getId(),s.getName(),s.getSex(),s.getNgaysinh(),s.getSdt(),s.getDiachi(),s.getEmail(),s.getNgaylam(),s.getNgaynghi()
                });
            }
            table.fireTableDataChanged();//cập nhập hiển thị dữ liệu
        } catch (Exception e) {
        }
    }
 private static String idstaff;
public void loadID()
    {
        try{
            StaffDAO vio=new StaffDAO();
            List<Model.Staff> list=vio.FindAll();
            for(Model.Staff v:list)
            {
                cbid.addItem(v.getUser());
            }
        }catch(Exception e)
        {
            
        }
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnadd;
    private javax.swing.JButton btnreset;
    private javax.swing.JButton btnupdate;
    private javax.swing.JButton btnxoa;
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.JComboBox<String> cbid;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JRadioButton rdnam;
    private javax.swing.JRadioButton rdnu;
    private javax.swing.JTable tablestaff;
    private javax.swing.JTextField txtaddress;
    private javax.swing.JTextField txtemail;
    private javax.swing.JTextField txtname;
    private javax.swing.JFormattedTextField txtngayra;
    private javax.swing.JFormattedTextField txtngaysinh;
    private javax.swing.JFormattedTextField txtngayvao;
    private javax.swing.JTextField txtphone;
    // End of variables declaration//GEN-END:variables
}
